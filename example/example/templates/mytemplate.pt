<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" xmlns:tal="http://xml.zope.org/namespaces/tal">
<head>
  <title>example page</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
  <link rel="shortcut icon" href="${request.static_url('example:static/favicon.ico')}" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript">
    $(function() {
      $('.release').click(function(e) {
        e.preventDefault();
        $.getJSON($(e.target).attr('href'));
        var p = $(e.target).parent();
        $('.uid', p).html('');
        $('.display_name', p).html('');
      });
      $('.join').click(function(e) {
        e.preventDefault();
        window.open($(e.target).attr('href'), 'join', "width=500,height=400");
      });
    });
  </script>
</head>
<body>
  <div>
    Dashboard
    <a href="${ req.route_url('logout') }">logout</a><br />
    <div>
      <span tal:condition="twitter">
        <span class="uid"><span tal:replace="twitter.uid">uid</span></span>
        <span class="display_name"><span tal:replace="twitter.display_name">display_name</span></span>
      </span>
      <a href="${ req.route_url('release', provider='twitter') }" class="release">Twitter release</a>
      <a href="${ req.route_url('auth_authenticate', provider='twitter', scene='join') }" class="join">Twitter join</a>
    </div>
    <div>
      <span tal:condition="facebook">
        <span class="uid"><span tal:replace="facebook.uid">uid</span></span>
        <span class="display_name"><span tal:replace="facebook.display_name">display_name</span></span>
      </span>
      <a href="${ req.route_url('release', provider='facebook') }" class="release">FaceBook release</a>
      <a href="${ req.route_url('auth_authenticate', provider='facebook', scene='join') }" class="join">FaceBook join</a>
    </div>
    <div>
      <span tal:condition="google">
        <span class="uid"><span tal:replace="google.uid">uid</span></span>
        <span class="display_name"><span tal:replace="google.display_name">display_name</span></span>
      </span>
      <a href="${ req.route_url('release', provider='google') }" class="release">Google release</a>
      <a href="${ req.route_url('auth_authenticate', provider='google', scene='join') }" class="join">Google join</a>
    </div>
    <div>
      <span tal:condition="ninja">
        <span class="uid"><span tal:replace="ninja.uid">uid</span></span>
        <span class="display_name"><span tal:replace="ninja.display_name">display_name</span></span>
      </span>
      <a href="${ req.route_url('release', provider='ninja') }" class="release">Ninja relesae</a>
      <a href="${ req.route_url('auth_authenticate', provider='ninja', scene='join') }" class="join">Ninja join</a>
    </div>
    <div>
      <span tal:condition="yahoo">
        <span class="uid"><span tal:replace="yahoo.uid">uid</span></span>
        <span class="display_name"><span tal:replace="yahoo.display_name">display_name</span></span>
      </span>
      <a href="${ req.route_url('release', provider='yahoo') }" class="release">Yahoo release</a>
      <a href="${ req.route_url('auth_authenticate', provider='yahoo', scene='join') }" class="join">Yahoo join</a>
    </div>
  </div>
</body>
</html>
